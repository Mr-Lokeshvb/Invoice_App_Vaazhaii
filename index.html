<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Invoice Generator</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>

<style>
  body { font-family: Arial, sans-serif; margin: 20px; }
  table { border-collapse: collapse; width: 100%; margin-top: 10px; }
  table, th, td { border: 1px solid #000; padding: 5px; text-align: left; }
  th { background-color: #ffcc00; }
  .item-row input { width: 100%; }
  button { margin-top: 10px; padding: 10px 15px; font-size: 16px; cursor: pointer; }
</style>
</head>
<body>

<h2>Invoice Generator</h2>

<label>Customer Name: <input type="text" id="customer" placeholder="Customer Name"></label><br><br>
<label>Customer Address: <textarea id="custAddress" rows="3" cols="50" placeholder="Customer Address"></textarea></label><br><br>

<h3>Items</h3>
<table id="itemsTable">
  <thead>
    <tr>
      <th>Item Name</th>
      <th>HSN</th>
      <th>Quantity</th>
      <th>Price (Rs.)</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody id="itemsBody">
    <tr class="item-row">
      <td><input type="text" class="itemName" value="Banana Chips - 200g"></td>
      <td><input type="text" class="hsn" value="2008"></td>
      <td><input type="number" class="qty" value="1" min="1"></td>
      <td><input type="number" class="price" value="90" min="0"></td>
      <td><button type="button" onclick="removeItem(this)">Remove</button></td>
    </tr>
  </tbody>
</table>
<button type="button" onclick="addItem()">Add Item</button><br><br>

<button onclick="generateInvoice()">Generate Invoice</button>
<br><br>
<button onclick="resetInvoiceCounter()">Reset Invoice Number</button>

<h3>Regenerate Existing Invoice</h3>
<label>
  Invoice No:
  <input type="text" id="regenInvoice" placeholder="VZ-0001">
</label>
<button type="button" onclick="loadInvoiceData(document.getElementById('regenInvoice').value)">
  Load Invoice
</button>

<script src="invoice.js"></script>
<script>
function addItem() {
  const tbody = document.getElementById('itemsBody');
  const row = document.createElement('tr');
  row.classList.add('item-row');
  row.innerHTML = `
    <td><input type="text" class="itemName" value="New Item"></td>
    <td><input type="text" class="hsn" value=""></td>
    <td><input type="number" class="qty" value="1" min="1"></td>
    <td><input type="number" class="price" value="0" min="0"></td>
    <td><button type="button" onclick="removeItem(this)">Remove</button></td>
  `;
  tbody.appendChild(row);
}

function removeItem(btn) {
  const row = btn.closest('tr');
  row.remove();
}

// Simple invoice counter starting from 0001
function getInvoiceNo() {
  if (!localStorage.getItem('invoiceCounter')) {
    localStorage.setItem('invoiceCounter', '1');
  } else {
    let count = parseInt(localStorage.getItem('invoiceCounter'));
    count++;
    localStorage.setItem('invoiceCounter', count);
  }
  let num = parseInt(localStorage.getItem('invoiceCounter')).toString().padStart(4, '0');
  return 'VZ-' + num;
}
</script>

</body>
</html>

